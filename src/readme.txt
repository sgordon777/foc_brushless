// **********************************************
// TESTS
// **********************************************

DESC: Test 2208
VOLT: 18v
MOTOR : 2208
CTRLR : STM32G474
SENSOR: MT6701
ALGO  : FOC_CURR | FOC_VOLTAGE
DRIVE : DRV8302
SENS  : HALL
LOOPTIM : 
CONC: More efficient in current mode above 1KRPM. Makes no different whether DRV8302 or DRV8313 used

0.0000  0.0159  0.0219  3.0939  -3.4603 0.0000  7.1729    0.5
33.0000 1.6984  -0.0257 20.2358 -7.8221 33.4363 466.3517  0.4
77.0000 3.4778  -0.0474 20.1540 -75.2295        77.8306 1177.4974  0.5
100.0000        5.0177  -0.1854 27.0735 -36.3404        101.4954        2125.7231 0.7
200.0000        9.1362  -0.7552 -1.6768 5.9649  199.6161        4492.0634 1.0
*240.0000        12.0000 -1.1032 19.1987 -52.9867        225.5417        14279.1298   1.0

// voltage
0.0000  -0.0005 0.0000  -0.0722 0.0000  0.0000  -0.3682 0.4
33.0000 1.9204  0.0297  -72.1784        0.0000  32.7852 452.8005 0.5
77.0000 3.5119  0.2980  -305.7448       0.0000  77.3704 2109.0134 0.7
100.0000        4.3825  0.5351  -422.9585       0.0000  100.6112        2951.6674  0.8
200.0000        9.8613  1.7605  -695.7301       0.0000  200.9470        8555.0957 2.1
*240.0000        12.0000 -12.0000        -535.2175       0.0000  213.4467        13500.1601  8.4


// D3536 1K RPM test
104.0000        0.5196  -0.0169 2300.8386       0.0000  105.0239        2325.212

-THings to try for high RPM
  -Updates to AS5600 encoder
    -1MBPS bitrate
    -Setting filter register
    -Helped alot (up to ~10K RPM)
  -using current mode
    -seems to help in some cases
  -Motion downsample
    -didn't seem to help
  -PWM frequency higher
    -set to 64000 (50000 achieved) didn't help
  -More CPU cycles
    -O3 didnt help with cycles, still ~60us with encoder, 150us with as5600
  -More optimizations to AS5600 (don't have to select angle register each time)
TODO
  -reduce overhead of AS5600 down from 150us (don't repeatedly ask for angle register)
    -helped
  -get 3rd current phase working
    -helped a bit
  -lower time constant in fiter register
  -SmoothSensor


DATE: ~1/20/2024
VOLT: 9v
MOTOR : rs2205
CTRLR : g431
ALGO  : FOC-TORQU(voltage)
DRIVE : DRV8302
SENS  : Encoder
LOOPTIM : 30us (current estimate)
Speed range: up to +/-1000 rad/s 
powertest: vel, watts
PWMFREQ: default(25000)
0,     0.3
-100, 1, -.64
-200, 2.5, -1.12
-300, 9.5, -1.5 
-400, 15.8, -1.78
-500, 18.1
-600, 26.7
-700, 26.7
-800, 28


Hobbypower ESC TEST:
-100, 
-200, 2.5
-300, 3.5
-400, 4.7
-500, 6
-600,  
-700, 
-800, 9
-900, 
-1000, 



DATE: 1/26/2024
VOLT: 9v
MOTOR : rs2205
CTRLR : g431
ALGO  : FOC-TORQU (FOC_voltage)
DRIVE : DRV8302
SENS  : AS5600 with speed modication
LOOPTIM : 120us
0.0000  0.0673  -0.0000 677.5244        0.0000  0.0293  2692.0764  0.2
100.0000        0.3535  -0.0593 851.6157        0.0000  99.2910 3730.4833  0.5
200.0000        0.6907  -0.2148 1553.2636       0.0000  198.4618        7236.4609  1.4 
300.0000        1.0314  -0.4660 2210.3911       0.0000  299.6200        12678.8925 4.1
400.0000        1.3961  -0.8982 3233.6474       0.0000  397.3194        19294.2226 10.3
500.0000        1.7713  -1.5013 4333.9443       0.0000  495.5841        25572.7148 26.2
600.0000        2.1430  -2.2865 5560.2861       0.0000  587.6065        28450.1679 60
-400.0000       -1.3106 -0.7013 -2571.2324      0.0000  -390.1811       27624.1054 6.3





DATE: 1/26/2024
TEST: speed test with modified AS5600
VOLT: 9v
MOTOR : rs2205
LOAD: none
CTRLR : g431
ALGO  : FOC-VELO (FOC_current)
DRIVE : DRV8302
SENS  : AS5600 with speed modication
LOOPTIM : 139us
PWMFREQ: default(25000)


  0.0000        -0.0106 0.0039  37.3273 -3.0234 -0.0796 1076.8023  0.2
100.0000        0.3024  -0.0977 94.0551 22.7770 100.7643        1107.3040  0.4, silent
200.0000        0.6822  -0.1202 31.6390 -157.0196       200.4911        3458.5822  1.0
300.0000        0.9574  -0.6419 247.5035        -17.1751        299.6865        4213.1289  2.2
400.0000        0.6968  -1.2680 896.6198        132.9259        398.7071        9929.0585  4.0
500.0000        0.3685  -1.6063 1255.5588       -42.2031        504.9307        14092.6191  6.6
600.0000        0.2304  -1.9165 1712.3829       -196.7387       600.6385        30614.4589  9.7
700.0000        -0.3360 -2.3012 2268.1401       -217.6167       703.5563        36891.2851 14.5
800.0000        -0.5395 -2.9155 3860.9123       50.5291 787.4431        41893.9570  22.3
-400.0000       -0.6129 -1.2187 -189.8373       74.3330 -399.6377       42768.3476   2.5
*Comment: want to try with encoder (which has much lower CPU utilization), but rs2205 shaft not a good fit.


DATE: 1/27/2024
TEST: Test for max speed using quadrature encoder
VOLT: 15v
MOTOR : D3536 (2205 doen't fit well with encoder)
LOAD: NONE
CTRLR : g431
ALGO  : FOC-VELO (FOC_current)
DRIVE : DRV8302
SENS  : quadrature encoder, 100 PPR/400CPR
LOOPTIM : 56us
LIMITS: 18/9/9
PWMFREQ: default(25000)

0.0000  0.0300  0.0036  486.0883        -0.4943 0.0000  52699.6523          0.4
100.0000        0.5559  -0.2343 861.4581        1.8632  96.3563 52712.6445    1.7
200.0000        0.9710  -0.5363 908.0799        -2.4264 199.9442        54115.6484   4.0
300.0000        1.3377  -0.9119 976.4470        6.3954  301.3185        56002.8476   6.9
400.0000        1.6992  -1.3166 1010.9965       2.9827  400.9138        58861.6523   10.3
500.0000        2.0031  -1.7917 963.1271        31.1817 500.4042        62699.1992   14.0
600.0000        2.2476  -2.2578 861.5413        -21.5169        603.3368        67259.14    17.7
700.0000        2.4689  -2.6571 4559.2509       145.4476        624.8552        72669.17       21.8 
800.0000        2.4898  -3.3756 525.5932        14.2109 800.6939        83437.2812    25.5
900.0000        2.6199  -3.9521 493.9270        -81.1028        900.8535        90783.43   30.8
1000.0000       3.1279  -5.6873 544.3565        20.5350 1001.6744       96261.0078      38.5
1200.0000       9.0000  -9.0000 7227.8579       18004.5312      959.4977        129870.3828    75
-400.0000       -1.9135 0.8581  -932.1606       27.4651 -400.5081       125334.3750          9.6


STFOC (D3536)
500:  12.7
900:  25
1100: 32
1200+: quit


Hobbypower (D3536)
500: 12.6
878: 21.5
1000: 26


DATE: 1/27/2024
TEST: Test for max speed using quadrature encoder
VOLT: 18v
MOTOR : rs2005
LOAD: none
CTRLR : g431
ALGO  : FOC-VELO (FOC_current)
DRIVE : DRV8302
SENS  : quadrature encoder, 100 PPR/400CPR
LOOPTIM : 56us
LIMITS: 18/9/9
PWMFREQ: default(25000)

0.0000  0.0974  -0.0166 930.5000        2.5331  0.0000  3208.4929                   0.4, 
100.0000        0.4062  -0.0598 700.1054        6.3402  104.3385        3253.4020   1.2
200.0000        0.6360  -0.1290 942.5846        -1.5096 196.8355        3920.9118   1.7
300.0000        0.9180  -0.2728 1198.0502       19.1335 298.1127        6099.9990   3.1
400.0000        1.2002  -0.4299 1384.7991       7.2325  399.4447        8801.3759   4.4
500.0000        1.4588  -0.6481 1537.6121       14.0964 499.5341        11429.2246  5.6, 4.9(better vib damp)
600.0000        1.6755  -0.8499 1637.6069       -24.4385 600.1196        14769.0048  6.9, 6.5
700.0000        1.8455  -1.1444 1785.2041       1.3653  698.8434        18573.5039   8.5
800.0000        2.0599  -1.3677 1615.5928       22.2648 799.8977        55911.1132   10
900.0000        2.2020  -1.6775 1697.9802       8.1010  899.7103        57167.0742   12
1000.0000       2.2944  -1.9960 1810.7254       -14.0902 1000.1435       58583.3046  13 1000
1100 blowup
1200 blowup
-500.0000       -1.4843 -0.5218 -1436.6088      29.2334 -500.0473       8572.3066    5




DATE: 1/27/2024
TEST: 8" prop testing with rs2005 in current mode
VOLT: 9.5v
MOTOR : rs2005
LOAD: 8" prop
CTRLR : g431
ALGO  : FOC-VELO (FOC_current)
DRIVE : DRV8302
SENS  : AS5600 with speed improvement
LOOPTIM : 
LIMITS: 18/9/9
PWMFREQ: default(25000)

0.0000  -0.0240 0.0040  -224.2220       -8.8525 2.3552  -6304.6596   0.2
100.0000       -0.6593 -0.1564 -532.0380       -46.6027        -99.8099        -7107.2954   0.6
200.0000       -1.2125 -0.5295 -1940.7110      -163.5156       -200.3743       -11030.6181   2.5
300.0000       -1.5394 -1.5799 -4913.8232      83.5001         -300.7366       -14642.2890   7.8
400.0000       -2.1303 -2.8231 -9934.1220      186.8221        -395.3497       -18999.0429   23.4
500.0000       -3.3122 -4.4343 -18517.4335     -120.5058       -498.2271       -24348.6464   57
550.0000       -3.2038 -4.7579 -17622.0957     -19.3024        -549.8694       -8259.2714    75
*craps out at 600

DATE: 1/29/2024
TEST: followon to above test in voltage mode, to see if we can get above 550 in voltage mode
VOLT: 9.5v
MOTOR : rs2005
LOAD: 8" prop
CTRLR : g431
ALGO  : FOC-VELO (FOC_voltage)
DRIVE : DRV8302
SENS  : AS5600 with speed improvement
LOOPTIM : 
LIMITS: 18/9/9
PWMFREQ: default(25000)

-600.0000       -2.7781 -4.8703 -11666.4921     0.0000  -597.2572       -25452.1992   70


DATE: 1/29/2024
TEST: voltage vs. current mode for 3 RPMS, loadless
VOLT: 18v, 9v
MOTOR : rs2005
LOAD: none
CTRLR : g431
ALGO  : FOC-VELO (FOC_VOLTAGE, FOC_CURRENT)
DRIVE : DRV8302
SENS  : AS5600 with speed improvement
LOOPTIM : 
LIMITS: 18/9/9
PWMFREQ: default(25000)
CONC: current mode is more efficient and goes to higher speeds before breakdown. Retest when a) lower overhead AS5600 driver, b)3-phase current

voltage(9.5v)
400.0000        1.5837  -1.4034 5005.6254       0.0000  401.4607        14791.4228    2.5
600.0000        2.2963  -2.8338 6738.8608       0.0000  600.6208        19621.7753    11.4
700.0000        2.6999  -3.9563 8063.4306       0.0000  701.1573        26844.1054    30
800.0000        3.1427  -5.5183 9826.2695       0.0000  797.6571        29564.8515    60

current (9.5v):
400.0000        1.3938  -1.8154 1260.0502       282.0765        399.6755        51579.3906   2.8
600.0000        0.9636  -2.9214 2113.2548       -242.7005       601.2428        54697.2460   7.1
700.0000        0.6857  -3.6212 2851.1499       -346.9440       698.8180        57619.5507   10.6
800.0000        -0.3118 -4.8386 4896.7431       106.6724        797.9854        60887.9453   17
900.0000        -0.8047 -5.7218 8928.1972       -39.1999        891.3590        65800.9375   34
1000: crap

voltage(18v):
400.0000        1.2974  -0.6118 2193.2924       0.0000  399.3290        19934.0253    9.4
600.0000        2.0372  -1.7660 4179.4941       0.0000  598.0590        24598.9785    46
700.0000        2.4405  -2.7440 5658.9252       0.0000  694.6554        27976.8437    87

current(18v):
400.0000        0.4761  -1.2275 1553.7979       200.7235 396.2577        17329.4804:   4.1
600.0000        0.3420  -1.9086 3268.7712       67.0195 587.0441        18717.5117     9.6
700.0000        -0.1941 -2.2194 5535.7802       -112.6910 698.6813        26491.6738   15.9
800.0000        -0.5344 -3.0620 11005.0234      54.5174  799.6908        31975.5429     32.3
900.0000        0.9619  -5.5959 26795.5468      269.6958 841.9174        35479.3554:  150(burn)



DATE: 1/29/2024
TEST: AS5600 optimization to only write angle register once and 3 phase current detection
VOLT: 9.5v
MOTOR : rs2005
LOAD: none
CTRLR : g431
ALGO  : FOC-VELO (FOC_VOLTAGE, FOC_CURRENT)
DRIVE : DRV8302
SENS  : AS5600 with speed improvement
LOOPTIM : 84us voltage mode: (down from 120us before fix), 106us current mode, down from 150us
LIMITS: 18/9/9
PWMFREQ: default(25000)
CONC: Reduced power a bit, didn't help top-end speed, 3 phase didn't seem to do much 

voltage mode:
400.0000        1.5824  -1.4197 5106.8017       0.0000  396.4887        26455.4960   2.5
600.0000        2.2410  -2.6058 6188.1875       0.0000  600.0015        34952.7890   7.4
700.0000        2.6110  -3.5178 7145.6767       0.0000  701.4345        42488.9687   18
800.0000        3.0191  -4.8059 8562.2548       0.0000  800.1176        47562.4453   41
900 blowup

current mode:
400.0000        1.3980  -1.3927 1062.2877       -78.4818 403.1849        14591.1093    2.9
600.0000        1.0034  -3.0539 1791.8662       -8.2192  603.6598        19335.1054    6.4
700.0000        0.5031  -3.8770 2065.0510       22.8651  704.6373        25194.2968    8.9
800.0000        -0.3693 -4.8328 3209.0270       267.0382 801.7262        30229.4472    12.5 
900.0000        -1.5199 -5.1504 4838.5122       -92.4651 903.1140        39673.9218    19 
1000 

18v, 3phase current mode
800.0000        -0.7402 -2.8611 7635.4145       118.2110        805.2446        24439.8730    24





DATE: 1/29/2024
TEST: Prop-on test for AS5600 optimization to only write angle register once and 3 phase current detection
VOLT: 9.5v
MOTOR : rs2005
LOAD: 8" prop
CTRLR : g431
ALGO  : FOC-VELO (FOC_VOLTAGE, FOC_CURRENT)
DRIVE : DRV8302
SENS  : AS5600 with speed improvement
LOOPTIM : 84us voltage mode: (down from 120us before fix), 106us current mode, down from 150us
LIMITS: 18/9/9
PWMFREQ: default(25000)
CONC: 

voltage mode
-400.0000       -1.9999 -2.5751 -9192.0625      0.0000  -399.5891       -5017.7753   21
-500.0000       -2.5453 -4.1811 -11941.2265     0.0000  -500.8199       -9139.4394   51
*-600.0000       -3.3414 -7.0157 -19597.1250     0.0000  -511.1051       -10542.2314  100+ 

current mode
-400.0000       -2.2963 -2.3546 -7842.5200      113.4697        -396.3306       -6463.7792  19
-500.0000       -2.8267 -3.8072 -13735.4980     60.9684 -500.9169       -11657.855400 45
*-600.0000       -3.7959 -5.3264 -20717.7871     22.1399 -569.1809       -13379.9238   101



DATE: 1/29/2024
TEST: encoder re-test with 3phase current
VOLT: 9.5v/18
MOTOR : rs2005
LOAD: 8" prop
CTRLR : g431
ALGO  : FOC-VELO (FOC_VOLTAGE, FOC_CURRENT)
DRIVE : DRV8302
SENS  : AS5600 with speed improvement
LOOPTIM : current_mode=62, voltage_mode=40
LIMITS: 18/9/9
PWMFREQ: default(25000)
CONC: reson for cuttoff at 10000 is the encoder 20Khz band-limit

voltage mode

current mode
100.0000        0.6154  -0.1295 703.4468        3.5535  100.2556        20229.7363    0.7
200.0000        1.1448  -0.3034 990.5172        -19.317 199.7072        21099.2675   1.7
300.0000        1.6383  -0.5995 1235.1186       5.8373  299.4362        22514.6640    2.5
400.0000        2.0484  -0.9460 1380.4022       15.7955 400.0750        23912.4062    2.7
500.0000        2.4451  -1.3054 1375.2764       -2.4934 500.4174        29326.5800    4.0
600.0000        2.7713  -1.7440 1514.0977       -20.980 600.2714        32956.2968    5.5
700.0000        3.0131  -2.2969 1628.4368       33.3645 700.4588        38006.4843    7.4
800.0000        3.3229  -2.7977 1533.7103       15.3446 800.3282        44802.7421    7.8
900.0000        3.4940  -3.3140 1585.7119       -37.095 899.7718        51280.5937    8.8
1000.0000       3.4938  -3.9557 1610.0924       21.8854 1000.3899       59808.5429    10.0
1100 stop

voltage mode
100.0000        0.5990  -0.2302 3289.8872       0.0000  100.0123        4135.0429    0.8
200.0000        1.0102  -0.6580 4703.4169       0.0000  199.9830        6679.0576    2.4
300.0000        1.3487  -1.1314 5392.6049       0.0000  299.6479        10818.0429    5.0
400.0000        1.6357  -1.5566 5565.5981       0.0000  399.5483        14029.4423    8.2
500.0000        1.9040  -1.9376 5539.1821       0.0000  499.9541        18020.3339    11.1
600.0000        2.1672  -2.2957 5464.0039       0.0000  600.0222        22167.1562    12.8
700.0000        2.4249  -2.6128 5332.9023       0.0000  700.5241        27058.4589    15.5
800.0000        2.6869  -2.9416 5244.2265       0.0000  800.4035        33539.0781    16.6
900.0000        2.9498  -3.2647 5175.4594       0.0000  900.3338        39815.1015    17.1
1000.0000       3.2927  -4.1428 5915.3339       0.0000  999.9846        50213.1601    17.8
1100 crapout


  DATE: 1/29/2024
  TEST: Prop-on retest for D3536+8" blade
  VOLT: 12.5v
  MOTOR : rs2005
  LOAD: 8" prop
  CTRLR : g431
  ALGO  : FOC-VELO (FOC_VOLTAGE, FOC_CURRENT)
  DRIVE : L298
  SENS  : AS5600 with speed improvements
  LOOPTIM : 
  LIMITS: 18/9/9
  PWMFREQ: default(25000)
  CONC: 


current
-400.0000       -0.7534 -2.9496 -9240.2265      366.2646        -399.6691       -5333.3706    25
-600.0000       -1.2080 -4.7057 -21204.4433     428.5147        -535.7078       -6404.7871     dead



voltage
-400.0000       -2.3900 -1.4040 -5161.9516      0.0000  -388.4830       -13331.2   119 22.8
-600.0000       -3.5896 -3.2063 -7876.8515      0.0000  -580.7235       -14210.8   642 102
700 dead
800 


  DATE: 2/1/2024
  TEST: speed test with AMS encoder
  TEST#: 
  VOLT: 15.5v
  MOTOR : D3536
  LOAD: none
  CTRLR : g474
  ALGO  : FOC-VELO (FOC_CURRENT)
  DRIVE : DRV8302
  SENS  : AMS103
  LOOPTIM : 
  LIMITS: 18/9/9
  PWMFREQ: default(25000)
  CONC: runs comfortably up to 1200, then runs out of voltage, performance is close to hobbypower and STFOC, monitor makes audable click due to motor stall, needs better tuning for >10K RPM
0.0000  0.0117  0.0004  233.4743        0.0413  -0.0000 53167.0507   0.4
100.0000        0.5128  -0.1213 348.9068        3.0322  99.8523 64302.9726 1.4
300.0000        1.3909  -0.5070 159.3455        14.5065 299.9115        67514.8125 4.7
500.0000        2.1889  -1.1434 -85.6685        70.4507 500.1214        72736.6562 10.6
700.0000        2.8946  -1.7437 -383.2667       -44.5393        701.1478        81311.1093 17.0
900.0000        3.5018  -2.6115 -708.8200       -25.9990        900.0693        88301.8515 26
1000.0000       3.7222  -2.9888 -882.6505       -134.5986       1000.6731       94559.6562 30.5
1100.0000       4.0514  -3.6628 -1052.1405      -75.6479        1100.3332       103102.7890 35
1200.0000       5.0813  -5.2601 -1389.0246      166.6911        1199.9212       114333.8359 40
*1300.0000       9.0000  -9.0000 -991.6426       3772.1579       1256.6865       122152.5468 45.2
*did not achieve target



  DATE: 2/2/2024
  TEST: speed test with AMS encoder + rs2205, goal is 25000RPM
  TEST#: 
  VOLT: 15.5v
  MOTOR : rs2205
  LOAD: none
  CTRLR : g474
  ALGO  : FOC-VELO (voltage/current)
  DRIVE : DRV8301/DRV8302
  SENS  : AMS103
  LOOPTIM : 
  LIMITS: 18/9/9
  PWMFREQ: default(25000)
  CONC: able to achieve ~22000 RPM @15.5v in voltage mode. Current mode didnt't work aswell as voltage.

voltage:
  0.0000  0.0492  0.0000  491.6231        0.0000  0.0000  9190.1347   0.1
  100.0000        0.3470  -0.0545 782.6179        0.0000  99.4951 10611.0976  0.6
  300.0000        0.9143  -0.2169 1031.7784       0.0000  300.3137        13042.1074 1.5
  500.0000        1.4686  -0.4155 1187.2017       0.0000  499.7767        17164.6328 2.6
  700.0000        2.0224  -0.6458 1317.5654       0.0000  699.9873        23823.2500 3.7
  900.0000        2.5769  -0.9219 1463.7183       0.0000  899.8959        32518.4726 4.3
  1000.0000       2.8563  -1.0853 1550.4265       0.0000  1000.1047       39583.9101 4.5
  1100.0000       3.1359  -1.2588 1633.3198       0.0000  1100.5568       46662.6953 6
  1200.0000       3.4154  -1.4640 1743.5335       0.0000  1200.0090       59787.9023 5.9
  1300.0000       3.6951  -1.6874 1856.5463       0.0000  1299.3934       79894.2031 6.7
  1500.0000       4.2593  -2.1779 2074.5610       0.0000  1500.1651       95271.4843 9
  1600.0000       4.5741  -2.8259 2521.7915       0.0000  1600.0902       111711.7890 12.2
  1700.0000       4.8790  -3.4021 2857.5419       0.0000  1700.5880       140228.7187 11.7
  1800.0000       5.2424  -4.7777 3789.8398       0.0000  1800.6270       165728.5937 12.5
  1900.0000       5.5986  -6.6034 4997.4443       0.0000  1887.8007       187728.8437 12
  2000.0000       6.0317  -9.0000 7730.5839       0.0000  1946.9782       202993.8593 13.1

(switch to 8302 because 8301 didnt work in current mode)
2ph current:
0   0.13
100 0.4
300 1.2
500 2.1
700 3.4
900 4.3
1100 5.4
1300 7.5
1500 18.5
*1700

3ph current
no better

>2000 with DRV8302
2000.0000       5.8572  -6.1442 4374.2656       0.0000  2006.6191       193452.7187  13
2100.0000       6.1534  -7.2491 4942.3549       0.0000  2095.2270       199735.2187  14
2200.0000       6.4971  -8.6684 5636.4155       0.0000  2196.7917       209561.4218  16
*2300.0000       6.8301  -9.0000 9131.5175       0.0000  2190.7067       216181.3906  18

stfoc
8100, 4.7 
11000, 6.5
20000, 12.3
22440, 14/5

hobbypower

15000 6.4
20000, 10.3
28500, 15


  DATE: 2/9/2024
  TEST: new MT6701 magnetic sensor
  TEST#: 
  VOLT: 15.2v
  MOTOR : rs2205
  LOAD: none
  CTRLR : g431
  ALGO  : FOC-VELO (FOC_VOLTAGE)
    DRIVE : DRV8302
  SENS  : MT6701 A/B/Z
  LOOPTIM : 
  LIMITS: 18/10/9
  PWMFREQ: default(25000)


8" blade, voltage
-400.0000       -1.4392 -1.0077 -3604.0354      0.0000  -399.4232       -40334.2734   19
-750.0000       -2.6868 -3.5066 -6713.2641      0.0000  -746.2209       -55226.7617   129
-800.0000       -2.8151 -3.7312 -6716.9379      0.0000  -793.5598       -12611.5312   129

8" blad, current
-400.0000       -1.7134 -0.6725 -6062.5595      -14.8535        -399.1132       -51579.8437 14.4
-750.0000       -3.3665 -2.9092 -15896.6074     -70.1252        -741.2657       -37577.285, 120 (difficulty achieving, need tune)
-800.0000       -3.5625 -3.2082 -17578.3867     -39.5409        -774.6697       -62369.0976 127

blade off
-400.0000       -1.1988 -0.3287 -1172.5949      0.0000  -400.4362       -12531.6386   1.9
-750.0000       -2.1723 -0.7699 -1465.9953      0.0000  -749.9587       -20779.1445   3.9
-1000.0000      -2.8699 -1.2036 -1721.2081      0.0000  -998.8045       -31886.8964   5.6
-1500.0000      -4.2832 -2.4T-1500264 -2310.6433      0T1000.0000  -1500.2540      -48652.5078   9.7
-2000.0000      -5.8229 -6.2940 -4522.5478      0.0000  -1988.4643      -57577.6484   16.3





DATE: 2/10/2024
  TEST: new MT6701 magnetic sensor, SSI sensor for absolute positioning
  TEST#: 
  VOLT: 15.2v
  MOTOR : rs2205, D3536
  LOAD: none
  CTRLR : g431
  ALGO  : FOC-VELO (FOC_VOLTAGE)
  DRIVE : DRV8302
  SENS  : MT6701 SSI
  LOOPTIM : 
  LIMITS: 18/10/9
  PWMFREQ: default(25000)


8" blade, rs2205, voltage
400.0000        1.4523  -1.0441 3734.3752       0.0000  399.4206        36930.8281  21
800.0000        2.8463  -3.9959 7278.0273       0.0000  784.3615        32322.88    163

8" blade, D3536, current
-400.0000       -2.1853 -0.1925 -3958.9997      127.5897        -399.8890       -164318.3593 19
-600.0000       -3.2567 -0.2615 -7213.0615      -401.3611       -598.1397       -151533.8437  50
-800.0000       -4.3242 -2.1555 -11484.1962     451.0103        -789.1222       -89113.5000   100 
-900.0000       -4.8130 -2.3661 -13747.6513     -55.6756        -884.0552       -143176.1875  140w, 155mm

D3536, noload, current
-400.0000       -1.9967 -0.3073 -348.3629       -6.6032 -401.3201       -4575.3613 8.9
-600.0000       -2.8163 -1.5154 -455.6175       656.6720        -598.5465       -9152.3642 17.1
-800.0000       -3.4815 -2.2383 -269.6916       556.7449        -799.8595       -16957.1484 22.5, clicking
-900.0000       -3.9372 -2.0524 14.5420 -121.0624       -902.9163       -27132.2656         28.3
-1000.0000      -4.1078 -2.9517 -56.5767        229.3611        -1001.1215      -38490.4960 34
-1100.0000      -4.9231 -3.5529 286.2941        63.3805 -1098.7863      -47291.3554         38
-1200.0000      -6.3021 -5.1861 -6.4004 -202.8173       -1195.9560      -55025.6367         42

D3536, noload, voltage
-400.0000       -2.1853 -0.1925 -3958.9997      127.5897        -399.8890       -164318.3593    46
-400.0000       -2.0653 -0.0404 -1450.4254      0.0000  -398.1101       -42277.0468   11.2 (after using right motor obj with KV=1400)
-600.0000       -3.1773 -0.1199 -2859.3754      0.0000  -599.5162       -48336.6562 22
-800.0000       -4.3901 -0.3008 -5377.4667      0.0000  -798.6683       -57344.7773 40, clicking from monitor
-900.0000       -5.0428 -0.4460 -7091.9799      0.0000  -898.5239       -68606.5937 60, clicking from montiro



rs2205, current, 12v
-850.0000       -9.0000 -8.9490 -18222.5566     13.3258 -793.0371       -46917.4101, 135w D=140
rs2205, voltage, 12v
-900.0000       -8.4998 -3.4202 -64555.8164     0.0000  -756.8519       -64205.4375, 130w D=136


A2212_10T, 12v
400.0000        2.8819  -0.8677 4975.5849       426.2994        399.5543        129350.7734     18.5    95mm
600.0000        4.1199  -1.7977 8929.6845       116.5695        599.9849        122661.0000     52w     105mm
777.0000        7.9819  -5.3855 12754.8857      46.2051 775.2968        93027.8125              108w    135mm

D3536, 12v
-400.0000       -2.3494 -1.4409 -4633.2158      -6.3765 -398.7161       -97907.4531          18.4  99
-600.0000       -3.4369 -2.6692 -7672.1640      -192.9286       -600.3526       -110975.4218600  50, 110
-777.0000       -5.2909 -6.2636 -11535.2451     156.9861        -777.4810       -80298.7812  100  145mm






DATE: 3/19/2024
  TEST: Speed test with MT6701
  TEST#: 
  VOLT: 18.3v
  MOTOR : rs2205
  LOAD: none
  CTRLR : g431
  ALGO  : FOC-VELO (FOC_VOLTAGE)
  DRIVE : DRV8302, simple wiring
  SENS  : MT6701 (ABZ)
  LOOPTIM : 
  LIMITS: 64000
  PWMFREQ: default(25000)

2200.0000       6.7119  -2.7145 17639.4980      0.0000  2198.3127       167582.6562   13.3





DATE: 4/2/2024
  TEST: effect of parameters on power draw in volage mode
  TEST#: 
  VOLT: 18.3v
  MOTOR : rs2205
  LOAD: none, tri-blade
  CTRLR : g431
  ALGO  : FOC-VELO (FOC_VOLTAGE)
  DRIVE : DRV8302, simple wiring
  SENS  : MT6701 (ABZ)
  LOOPTIM : 
  LIMITS: 64000
  PWMFREQ: default(25000)
  CONC: SipleFOC in voltage mode, with tuned motor settings is equivilent to Hobbypower or STFOC (at 22KRPM)

# shaftless testing
# BLDCMotor motor = BLDCMotor(7, 0.1, 2500, 0.00001); // rs2205
1000.0000       3.0237  -0.2264 3234.0883       0.0000  999.7276        5665.8286, 13.6
# BLDCMotor motor = BLDCMotor(7, 0.1, 3000, 0.00001); // rs2205
1000.0000       2.8931  -0.4493 6417.5058       0.0000  1000.2429       52031.1875  9.2w
# BLDCMotor motor = BLDCMotor(7, 0.1, 4000, 0.00001); // rs2205
1000.0000    2.6577  -0.6786 9693.4570       0.0000  1000.1964       23786.1171  4.7w
# BLDCMotor motor = BLDCMotor(7, 0.1, 4000); // rs2205
1000.0000       3.0128  0.0000  13243.0937      0.0000  1000.2235       5880.5922  9.2w
# BLDCMotor motor = BLDCMotor(7, 0.1, 4000, 0.000001); // rs2205      
1000.0000       3.1111  -0.0996 14222.2451      0.0000  1000.4688       12839.3417  12w
# BLDCMotor motor = BLDCMotor(7, 0.1, 4000, 0.00003); // rs2205
1000.0000       2.2438  -1.1665 5554.0190       0.0000  1000.1730       4416.8295 5.4w
#BLDCMotor motor = BLDCMotor(7, 0.1, 5000, 0.00001); // rs2205
1000.0000       2.5411  -0.8334 11906.0605      0.0000  1000.0108       7445.7329   4.3w
#BLDCMotor motor = BLDCMotor(7, 0.1, 7000, 0.00001); // rs2205
1000.0000       2.3957  -1.0018 14309.1933      0.0000  1000.1829       9086.0810   4.7w


# BLDCMotor motor = BLDCMotor(7, 0.1, 4000, 0.00001); // rs2205, tri-blade
# L4.0
2000.0000       4.0000  -3.7418 6246.5239       0.0000  1999.5032       49925.8203, 42w
# L6.0
2000.0000       5.7793  -3.3646 24035.7324      0.0000  1999.6917       39335.0820, 54w
# HOBBYPOWER
0.0000  -4.0000 4.0000  -74134.1093     0.0000  2022.0513       155325.9062         46.1
# STFOC
0.0000  -4.0000 4.0000  -74834.1250     0.0000  2063.5190       232547.8593         45.6





  DATE: 4/23/2024
  TEST: test rs2205 with 9v SW limit
  TEST#: 
  VOLT: 18v(bat)
  MOTOR : rs2205
  LOAD: none
  CTRLR : g474
  ALGO  : FOC-VELO (voltage)
  DRIVE : DRV8302(simple wiring)
  SENS  : MT6701(ABZ)
  LOOPTIM : 
  LIMITS: 18/9/7
  PWMFREQ: default(64000)
  TUNE: VEL=0.02/0.1/0.0/2000/1000/0.02
  CONC: 
        -random instability still isue
        -able to reach 2500 on voltage control
        -pwm frequency has an impact on power
        -5/2, cannot reproduce!!!! Why? 
            ***** 5/9/2024 variable supply + 9/9/4.5 configuration works much more stabily, though still don't have symetry ****
 

500.0000        1.2964  -0.0597 1704.9133       0.0000  500.2139        23584.2187, 2.2
1000.0000       2.6378  -0.2708 3868.8420       0.0000  1000.0524       32638.8085, 7
1500.0000       4.0458  -0.7027 6691.3295       0.0000  1500.2194       57314.1210, 12
2000.0000       6.1162  -2.2619 16161.9130      0.0000  1999.2976       88016.1562, 12
2500.0000       7.8673  -3.9213 22410.7011      0.0000  2499.6611       140586.7968, 16.7
// Triblade, 25000
-500.0000       -1.3506 -0.0789 -2253.5180      0.0000  -499.9250       -4776.70                                11, 3.3
-1000.0000    -2.8876 -0.4455 -6363.7231      0.0000  -1000.1821      -23302.8                                769, 14.8
-1500.0000      -4.6678 -1.3541 -12884.3662     0.0000  -1501.4071      -35117.0                                468, 42.8
-2000.0000      -10.2050        -7.9812 -57130.7890     0.0000  -1995.7198     -                                65749.179, 42.7
// Triblade, 64000
500.0000        1.3431  -0.0760 2169.6591       0.0000  500.3204        9955.4960, 2.6
1000.0000       2.7221  -0.3306 4724.6386       0.0000  999.5020        18775.2128, 8.1
1500.0000       4.2224  -0.8890 8468.4228       0.0000  1499.7080       36735.4765, 23.5
2000.0000       6.9686  -3.4546 24682.9648      0.0000  1999.4246       63415.0546, 41
2500.0000       12.0000 -12.0000        65390.5546      0.0000  2426.2336       90928.5234, 91





// pwm_frequency=25000
1000.0000       2.7467  -0.3474 4963.8437       0.0000  999.7892        38318.9023, 10

// BTS7960, driver.pwm_frequency=default (25Khz)
500.0000        1.7570  -0.2211 6320.0141       0.0000  499.8292        33197.8632, 2.9
1000.0000       2.7752  -0.3670 5242.3715       0.0000  1000.0841       53263.6367, 6.2
1500.0000       3.8429  -0.4896 4662.4614       0.0000  1500.2247       78019.8203, 20
2000.0000       6.5299  -2.8398 20284.9863      0.0000  1999.9235       95983.3750, 23.8
2500.0000       9.0000  -9.0000 36722.6601      0.0000  2367.0500       143443.0781, 23.7
// Triblade
500.0000        1.8218  -0.2438 6966.7944       0.0000  499.8966        3742.1938, 3.5
1000.0000       2.8936  -0.4508 6445.4887       0.0000  999.2354        13660.9072, 10.6
1500.0000       4.0799  -0.7432 7088.5131       0.0000  1497.7222       27730.2929, 22.6
2000.0000       8.6478  -5.8051 41499.9023      0.0000  1998.3105       49016.9335, 48
2200.0000       12.0000 -12.0000        72052.1953      0.0000  2130.2648       74073.5468, 55




1000.0000       2.7777  -0.3683 5259.8618       0.0000  1000.4008       19372.9042, 6.5


  DATE: 4/28/2024
  TEST: Big motor basic testing
  TEST#: 
  VOLT: 18v(bat)
  MOTOR : big
  LOAD: none
  CTRLR : g474
  ALGO  : SIMPLE_FOC
  DRIVE : DRV8302(simple wiring)
  SENS  : MT6701(ABZ), built-in shaft magnet
  LOOPTIM : 
  LIMITS: 18/9/
  PWMFREQ: default(64000)
  TUNE: VEL=0.02/0.1/0.0/2000/1000/0.02
  CONC: 


Open-loop, 100rad/s @ 2.4v @ 5.7w, Computed K = 397
MC1 (vel) T100, @ V=2.4121 @ 6.2w
MC0 (tor) T1.65 @ V=2.4121 @ 6.2w


 DATE: 5/11/2024
  TEST: big motor speed test, +/- 100, 200, 300, 400, 500
  TEST#: 
  VOLT: 18 (18vbat)
  SENS  : MT6701(ABZ)
  MOTOR : big motor
  DRIVE : DRV8302(simple wiring)
  MOUNT : dual big motor mount
  LOAD: none
  CTRLR : g474
  ALGO  : SIMPLE_FOC, VOLTAGE
  LOOPTIM : 
  LIMITS: 18/18/12
  PWMFREQ: 64000
  TUNE: VEL=0.5,2.0,0,2000,1000,0.02 
        ANG=50,0,0,2000,100,0
        BLDCMotor(3, 0.1, 300);

100.0000        2.2287  0.0000  -340.0421       0.0000  100.5411        13865.2890  6.8
200.0000        4.5514  0.0000  518.0120        0.0000  199.9091        15037.5761  19.2
300.0000        7.0716  0.0000  3227.6105       0.0000  299.8538        16406.1464  38.4
400.0000        10.7405 0.0000  17467.9082      0.0000  399.5917        19000.6152  70.3
500.0000        12.0000 0.0000  27474.1640      0.0000  411.0815        22517.2441  75

-100.0000       -2.2169 0.0000  442.2117        0.0000  -100.4698       22500.5800  6.2
-200.0000       -4.4385 0.0000  710.8880        0.0000  -200.3523       19314.7910  16.7
-300.0000       -6.7805 0.0000  -235.1284       0.0000  -300.2114       16808.1875  30
-400.0000       -9.4513 0.0000  -4386.5678      0.0000  -400.4350       12761.2529  49.5
-500.0000       -12.000 0.0000  -22425.9570     0.0000  -433.5101       9804.6699   58








  DATE: 5/9/2024
  TEST: rs2205 testing for instability, 9v, 11.1v(3s)
  TEST#: 
  VOLT: 9,11 (18vbat+vari-buck set to 9,11)
  SENS  : MT6701(ABZ)
  MOTOR : rs2205
  DRIVE : DRV8302(simple wiring)
  MOUNT : L-bracket in vise
  LOAD: none
  CTRLR : g474
  ALGO  : SIMPLE_FOC, VOLTAGE/CURRENT
  LOOPTIM : 
  LIMITS: 9/9/5, 11/11/6
  PWMFREQ: 64000
  TUNE: VEL=0.02/0.1/0.0/2000/1000/0.02 ANG=60/0.0/0.0/2000/200/0.00
        BLDCMotor(7, 0.1, 4000, 0.00001);
  CONC: Stability is excellent with low voltage source
  
  // open_loop, CW, 
// 9/9/5  
-500.0000       -1.3119 -0.1637 -4678.4814      0.0000  -499.9883       -27170.2246, 1.7
-1000.0000      -2.5266 -0.5869 -8384.2138      0.0000  -1000.0762      -58725.8593, 3.0
-1500.0000      -3.7149 -1.2414 -11818.8525     0.0000  -1500.5284      -44030.4687, 4.6
-2000.0000      -5.0000 -4.9061 -41091.7109     0.0000  -527.7132       -121860.8515, 7.6
-2500.0000      -5.0000 -4.1188 -7792.2202      0.0000  -2500.3229      -73094.1015, 26.8
 // CCW
500.0000        1.3756  -0.1862 5326.2021       0.0000  499.3481        -70488.9609, 2.2
1000.0000       2.7324  -0.7308 10436.1748      0.0000  1000.4021       -62315.4960, 5.4
1500.0000       4.0616  -1.6063 15303.5419      0.0000  1499.4591       -36998.8085, 11.3
2000.0000       5.0000  -3.8551 16240.5761      0.0000  1999.8555       -13215.5976, 6.8
*2500.0000       5.0000  -5.0000 12612.2021      0.0000  2214.7946       33612.3632, 11.3 // very smooth and quiet

// 11/11/6
// CW
-500          -1.2883 -0.1555 -4442.6445      0.0000  -500.0080       -3123.7770  2.2
-1000         -2.4569 -0.5378 -7678.9770      0.0000  -1000.5504      -8807.0117  4.1
-1500         -3.5997 -1.1198 -10657.0214     0.0000  -1501.1186      -21517.7070 5.7
-2000         -4.7607 -1.9383 -13845.4003     0.0000  -1999.9724      -36090.2382 7.5
-2500         -6.0000 -3.5851 -17776.7949     0.0000  -2501.2365      -54531.4414 11.1
// CCW
500.0000        1.3638  -0.1821 5207.6943       0.0000  499.4162        18722.8925  2.2 
1000.0000       2.7189  -0.7216 10309.5644      0.0000  999.8875        29210.7539  5.7
1500.0000      4.0571  -1.6009 15242.9199      0.0000  1500.4105       43685.3281   13.5
2000.0000      5.5264  -3.0102 21499.7792      0.0000  2000.1646       65715.6640   23.6
2500.0000       6.0000  -6.0000 17902.8320      0.0000  2493.7705       102531.5156 10.0

// 11/11/6
  // CURRENT CONTROL
//CW
-500.0000       -1.2785 -0.3049 -281.6012       -186.7965       -499.4552       -9873.7451 1.7
-1000.0000      -2.3168 -1.1791 -342.5792       -85.2577        -1000.2341      -15592.6347 3.2
-1500.0000      -2.9980 -2.4696 -472.9053       56.3730         -1498.0073      -41634.9257  5.7
-2000.0000      -3.2448 -3.9728 -655.1118       83.7190         -1997.6130      -81531.1796 9.2  *minor instability caused by blips from reading
-2500.0000      -6.0000 -6.0000 789.2983        12820.5576      -2151.4946      -94218.5078 27.9
// CCW
500.0000        1.3006  -0.2143 273.3046        -71.1615        500.2921        -97493.5000 1.7
1000.0000       2.4030  -0.9837 360.7891        10.0575         1000.1524       -92064.6015 3.2
1500.0000       3.2228  -2.1733 316.1657        -30.6695        1501.5571       -83897.9218 5.6
2000.0000       3.5956  -3.4696 375.8692        -837.7258       2008.3537       -65643.7890 9.0
2500.0000       6.0000  -6.0000 -71.8932        8833.0839       2243.6655       -43752.0781 18.4



  DATE: 5/9/2024
  TEST: D3536 testing for instability, 11.1v(3s)
  TEST#: 
  VOLT: 11 (18vbat+vari-buck set to 11)
  SENS  : MT6701(ABZ)
  MOTOR : D3536
  DRIVE : DRV8302(simple wiring)
  MOUNT : L-bracket in vise
  LOAD: none
  CTRLR : g474
  ALGO  : SIMPLE_FOC, VOLTAGE
  LOOPTIM : 
  LIMITS: 11/11/6
  PWMFREQ: 64000
  TUNE: VEL=0.02/0.1/0.0/2000/1000/0.02 ANG=60/0.0/0.0/2000/200/0.00
        BLDCMotor(7, 0.1, 3000, 0.00001);
  CONC: Stability is excellent
        BLDCMotor motor = BLDCMotor(7, 0.1, 2500, 0.00003); 
          -worse in all cases
        BLDCMotor motor = BLDCMotor(7, 0.1, 2500, 0.00001); 
          -close, but still not as good

CW
500.0000       2.1104  -0.3447 9838.1337       0.0000  500.5178        -38600.1015  7.5
1000.0000       4.0688  -1.2726 18180.3457      0.0000  999.9912        -25306.1992 18.5
1500.0000       6.0000  -3.2975 26221.7089      0.0000  1500.7298       -11550.7548 31.4
CCW
-500.0000       -2.0601 -0.3272 -9355.0244      0.0000  -499.6318       -9736.8378  8.8
-1000.0000     -3.8645 -1.1296 -16135.2822     0.0000  -1000.0763      -27755.7304  24.3
-1500.0000      -5.6599 -2.3970 -22812.1308     0.0000  -1501.1003      -41801.8398 42




  DATE: 5/9/2024
  TEST: Blade-on testing with rs2205 3s
  TEST#: 
  VOLT: 11 (18vbat+vari-buck set to 11)
  SENS  : MT6701(ABZ)
  MOTOR : rs2205
  DRIVE : DRV8302(simple wiring)
  MOUNT : L-bracket in vise
  LOAD: none
  CTRLR : g474
  ALGO  : SIMPLE_FOC, VOLTAGE
  LOOPTIM : 
  LIMITS: 11/11/6
  PWMFREQ: 64000
  TUNE: VEL=0.02/0.1/0.0/2000/1000/0.02 ANG=60/0.0/0.0/2000/200/0.00
        BLDCMotor(7, 0.1, 4000, 0.00001);
  CONC: Good up to 800 (7650RPM)
       
200.0000        0.6721  -0.0468 3348.9550       0.0000  199.7611        -68768.1953 2.6
400.0000        1.4751  -0.2239 8002.5703       0.0000  399.7363        -65564.3515 13
600.0000        2.4859  -0.6186 14734.8789      0.0000  599.7528        -60774.5429 45
800.0000        3.7886  -1.3628 24437.2753      0.0000  796.6682        -55597.6601 121
900.0000        4.6299  -1.9547 31181.4414      0.0000  895.5538        -46196.5664 181   not stable

Against wind
-200.0000       -0.6781 -0.0477 -3392.2456      0.0000  -200.7567       -47022.2460 2.6
-400.0000       -1.5077 -0.2331 -8331.8369      0.0000  -399.6025       -50127.9531 13.1
-600.0000       -2.5614 -0.6501 -15498.4580     0.0000  -599.2545       -54994.0820 46.4
-800.0000       -3.9759 -1.4699 -26261.1601     0.0000  -799.6031       -61315.5312 131
-900.0000       -4.4306 -1.7972 -29725.6445     0.0000  -863.7229       -74218.1484, 171    crapped out


  DATE: 5/9/2024
  TEST: Blade-on testing with D3536 3s
  TEST#: 
  VOLT: 11 (18vbat+vari-buck set to 11)
  SENS  : MT6701(ABZ)
  MOTOR : D3536
  DRIVE : DRV8302(simple wiring)
  MOUNT : L-bracket in vise
  LOAD: none
  CTRLR : g474
  ALGO  : SIMPLE_FOC, VOLTAGE
  LOOPTIM : 
  LIMITS: 11/11/6
  PWMFREQ: 64000
  TUNE: VEL=0.02/0.1/0.0/2000/1000/0.02 ANG=60/0.0/0.0/2000/200/0.00
        BLDCMotor(7, 0.1, 3000, 0.00001);
  CONC: Good up to 900 (7650RPM)
       
200.0000        0.9339  -0.0677 4832.6562       0.0000  200.2134        38532.2343  3.4
400.0000        1.8740  -0.2726 9738.6025       0.0000  399.9209        40834.8593  15.6
600.0000        2.8769  -0.6411 15270.2041      0.0000  599.7502        44468.9492  42.5
800.0000        3.9344  -1.1955 21285.1328      0.0000  802.3428        49611.3750  94.9
900.0000        4.4865  -1.5502 24615.1738      0.0000  899.6754        35298.94    135
1000.0000       4.9283  -1.8731 26854.8574      0.0000  996.4386        34384.2734, 165 crapped out

  DATE: 5/11/2024
  TEST: Blade-on testing with D3536 3s, but using BTN7960 driver board
  TEST#: 
  VOLT: 11 (18vbat+vari-buck set to 11)
  SENS  : MT6701(ABZ)
  MOTOR : D3536
  DRIVE : DRV8302(simple wiring)
  MOUNT : L-bracket in vise
  LOAD: none
  CTRLR : g474
  ALGO  : SIMPLE_FOC, VOLTAGE
  LOOPTIM : 
  LIMITS: 11/11/6
  PWMFREQ: default (25K)
  TUNE: VEL=0.02/0.1/0.0/2000/1000/0.02 ANG=60/0.0/0.0/2000/200/0.00
        BLDCMotor(7, 0.1, 3000, 0.00001);
  CONC: Peformanc simmilar to DRV8302 with some exceptions
          -Power usage marginally higher, possibly due to lower modulation freq
          -Low speed performance is much worse, motor "flutters"
      TODO: test at 900

-200.0000       -1.4614 -0.1417 -10103.7451     0.0000  -200.3912       -16184.5673 4.7
-400.0000       -2.4829 -0.4431 -15827.7910     0.0000  -399.9292       -29658.2929  19.2
-600.0000     -3.5075 -0.9061 -21565.0566     0.0000  -600.2336       -32123.3144   50.2
-800.0000       -4.3629 -1.4351 -25610.6132     0.0000  -800.5181       -51927.6054 105


  DATE: 5/10/2024
  TEST: Blade-on testing with 42BLS02 (20v)
  TEST#: 
  VOLT: 20 (18vbat)
  SENS  : MT6701(ABZ)
  MOTOR : 42BLS02 nema motor
  DRIVE : DRV8302(simple wiring)
  MOUNT : L-bracket in vise
  LOAD: none
  CTRLR : g474
  ALGO  : SIMPLE_FOC, VOLTAGE
  LOOPTIM : 
  LIMITS: 18/18/12
  PWMFREQ: 64000
  TUNE: VEL=0.02/0.1/0.0/2000/1000/0.02 ANG=60/0.0/0.0/2000/200/0.00
        BLDCMotor(7, 0.1, 3000, 0.00001);
  CONC: power usage a bit lower than other motors, Good up to 800


// 8" BLADE-ON test (200, 400, 600, 800, 900)
// BLS02 19.8v
// 18/18/12
-200.0000       -4.7227         0.7983  1995.8537       0.0000  -199.9801       -11032.8945   5.3
-400.0000       -10.6845        0.2959  370.3763        0.0000  -400.2356       -13526.7031   15
-600.0000       -12.0000        -3.6171 12335.4404      0.0000  -599.5689       -20553.5722   32.8
-800.0000       -12.0000        -10.322 28347.7832      0.0000  -801.1350       -25536.0585   82
*-900.0000       -12.0000        -12.000 30144.6679      0.0000  -823.7545       -44191.7851   90





/***************************************************************************************************
/*                                       Tuning for D3536, voltage mode, 
/***************************************************************************************************

NOTE: The settings below are unstable @ voltage_mode, 18v(power) / 12v(driver)

// control loop type and torque mode 
motor.torque_controller = TorqueControlType::voltage;
motor.controller = MotionControlType::velocity;
motor.motion_downsample = 0.0;

// velocity loop PID
motor.PID_velocity.P = 0.1;
motor.PID_velocity.I = 0.3;
motor.PID_velocity.D = 0.0;
motor.PID_velocity.output_ramp = 2000.0;
motor.PID_velocity.limit = 1000.0;
// Low pass filtering time constant 
motor.LPF_velocity.Tf = 0.02;
// angle loop PID
motor.P_angle.P = 40.0;
motor.P_angle.I = 0.0;
motor.P_angle.D = 0.0;
motor.P_angle.output_ramp = 2000.0;
motor.P_angle.limit = 200.0;
// Low pass filtering time constant 
motor.LPF_angle.Tf = 0.0;
// current q loop PID 
motor.PID_current_q.P = 3.0;
motor.PID_current_q.I = 300.0;
motor.PID_current_q.D = 0.0;
motor.PID_current_q.output_ramp = 0.0;
motor.PID_current_q.limit = 12.0;
// Low pass filtering time constant 
motor.LPF_current_q.Tf = 0.005;
// current d loop PID
motor.PID_current_d.P = 3.0;
motor.PID_current_d.I = 300.0;
motor.PID_current_d.D = 0.0;
motor.PID_current_d.output_ramp = 0.0;
motor.PID_current_d.limit = 12.0;
// Low pass filtering time constant 
motor.LPF_current_d.Tf = 0.005;
// Limits 
motor.velocity_limit = 200.0;
motor.voltage_limit = 5.0;
motor.current_limit = 1000.0;
// sensor zero offset - home position 
motor.sensor_offset = 85313.453;
// general settings 
// motor phase resistance 
motor.phase_resistance = 0.784;
// pwm modulation settings 
motor.foc_modulation = FOCModulationType::SinePWM;
motor.modulation_centered = 1.0;


/***************************************************************************************************
/*                                       PROFILING
/***************************************************************************************************
Loop profile, stm32g474, -O3, overhead for each is 0.25us

Thing                       Time (us)
arduino housekeeping        0.687
motor.loopFOC()             13.88
motor.move();               10.31 
motor.monitor();            0.56
command.run();              0.875
analogRead()                150.69
lpf, scale                  1.625
set target                  0.375





 DATE: 1/21/2025
  TEST: high speed test for 2205
  TEST#:
  VOLT: 12 (3s)
  SENS  : MT6701(ABZ)
  MOTOR : RS2205
  DRIVE : DRV8302(simple wiring)
  MOUNT : L-bracket in vise
  LOAD: none
  CTRLR : g474
  ALGO  : SIMPLE_FOC, VOLTAGE
  LOOPTIM : 25us
  LIMITS: 12/12/7
  PWMFREQ: 64000
  TUNE: VEL=0.02/0.1/0.0/2000/1000/0.02 ANG=60/0.0/0.0/2000/200/0.00
        BLDCMotor(7, 0.1, 3000, 0.00001);
  CONC: hit 3000 with some voltage to spare
1000.0000       2.7582  -0.3555 5080.3422       0.0000  999.7255        254055.6250, 3.4
2000.0000       5.8106  -1.8314 13078.1123      0.0000  2000.5242       241461.9062, 17.7
3000.0000       7.0000  -6.8344 2475.0422       0.0000  3000.0546       154799.0156, 20.3W

 DATE: 1/21/2025
  TEST: high speed test for 2205, black tri-blade
  TEST#:
  VOLT: 12 (3s)
  SENS  : MT6701(ABZ)
  MOTOR : RS2205
  DRIVE : DRV8302(simple wiring)
  MOUNT : L-bracket in vise
  LOAD: none
  CTRLR : g474
  ALGO  : SIMPLE_FOC, VOLTAGE
  LOOPTIM : 25us
  LIMITS: 12/12/7
  PWMFREQ: 64000
  TUNE: VEL=0.02/0.1/0.0/2000/1000/0.02 ANG=60/0.0/0.0/2000/200/0.00
        BLDCMotor(7, 0.1, 3000, 0.00001);
  CONC: 
1000.0000       2.8517  -0.4210 6015.9780       0.0000  999.7089        171442.6718, 7.8
2000.0000       6.0000  -2.2459 15025.3251      0.0000  1998.1721       212497.7343, 40.3
2500.0000       6.0000  -5.2103 3778.7009       0.0000  2497.8466       227708.9843, 87
2700.0000       6.0000  -6.0000 1463.2558       0.0000  2600.7192       154341.4531, 101w, d=1 screwdriver

500.0000        2.1226  -0.3491 9987.3769       0.0000  499.3099        284434.062500, 27, d=1 screwdriver
600.0000        2.7513  -0.5883 14009.3271      0.0000  599.9324        292012.1250, 50, d=~1.5 screwdriverT

rs2205, big prop
-850.0000       -5.0198 -1.8407 -31271.6015     0.0000  -840.8933       -36080.5273, 160W
